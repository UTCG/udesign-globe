<head>
<script src="three.js"></script>
<script src="OrbitControls.js"></script>
<script type="module">
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

    // const controls = new OrbitControls( camera, renderer.domElement );

    const renderer = new THREE.WebGLRenderer(
        {
            antialias: true
        }
    );
    renderer.setSize( window.innerWidth, window.innerHeight );
    renderer.setPixelRatio(window.devicePixelRatio);
    document.body.appendChild( renderer.domElement );

    // const spherePosition = new THREE.Vector3(0, 0, 0);
    // const geometry = new THREE.SphereGeometry(0.75, 16, 32);
    // geometry.position = spherePosition;
    // const wireframe = new THREE.WireframeGeometry( geometry );
    // const material = new THREE.MeshBasicMaterial( { map: new THREE.TextureLoader().load('./img/globe.jpg') } );
    const material = new THREE.MeshStandardMaterial({
            map: new THREE.TextureLoader().load('./img/globe.jpg')})

    material.bumpMap   = THREE.ImageUtils.loadTexture('./img/earthbump1k.jpg');     
    material.bumpScale = 0.03;

    const sphere = new THREE.Mesh(
        new THREE.SphereGeometry(1, 30, 30),
        material
            // color: 0xff0000
            );
    scene.add( sphere );

    camera.position.z = 3;

    const ambientLight = new THREE.AmbientLight( 0x404040 ); // soft white light
    scene.add( ambientLight );

    const light = new THREE.PointLight( 0xffffff, 10, 20 );
    light.position.set(10, 10, 10);
    scene.add( light );

    // add a marker at the given coordinates that is the given colour
    function calcPosFromLatLonRad(lat, lng, markerColour) {
        var phi = (90 - lat) * (Math.PI/180);
        var theta = (lng + 180) * (Math.PI/180);
        let x = (-(Math.sin(phi)*Math.cos(theta)));
        let z = (Math.sin(phi)*Math.sin(theta));
        let y = (Math.cos(phi));

        return {x, y, z};
    }

    let mesh = new THREE.Mesh(
            new THREE.SphereGeometry(0.025, 20, 20),
            new THREE.MeshStandardMaterial({ colour: 0xff0000 })
        )

    let pos = calcPosFromLatLonRad(45.4215, -75.6972)

        mesh.position.set(pos.x, pos.y, pos.z)

        sphere.add(mesh)

    // addMarker(15.6677, 96.5545, 0xff0000)
    // addMarker(45.4215, 75.6972, 0xff0000)
    // addMarker(50.4501, 30.5234, 0xff0000)


    function animate() {
        requestAnimationFrame( animate );
        renderer.render( scene, camera );
        sphere.rotation.y += 0.005
        

    }

    animate();
</script>
</head>
<body>

</body>